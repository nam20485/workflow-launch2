<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Report: Profile Genie Architecture</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .nav-link.active {
            color: #2563eb; /* blue-600 */
            border-bottom-color: #2563eb;
        }
        .diagram-node {
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .diagram-node.active, .diagram-node:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            border-color: #3b82f6; /* blue-500 */
        }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 border-b border-slate-200">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-slate-800">Profile Genie</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#architecture" class="nav-link text-slate-600 hover:text-blue-600 border-b-2 border-transparent pb-1">Architecture</a>
                <a href="#workflow" class="nav-link text-slate-600 hover:text-blue-600 border-b-2 border-transparent pb-1">The Scout Workflow</a>
                <a href="#tech-stack" class="nav-link text-slate-600 hover:text-blue-600 border-b-2 border-transparent pb-1">Tech Stack</a>
                <a href="#risks" class="nav-link text-slate-600 hover:text-blue-600 border-b-2 border-transparent pb-1">Risks & Mitigations</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-6">

        <section id="hero" class="text-center py-16">
            <h2 class="text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight">Automating the Application Grind</h2>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-slate-600">An interactive overview of the architecture behind Profile Genie, a smart assistant for user research participants.</p>
        </section>

        <section id="architecture" class="py-16">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">System Architecture Overview</h3>
                <p class="mt-2 text-slate-500 max-w-2xl mx-auto">A service-oriented design for maintainability and security. Click on a component to learn more.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
                <div class="flex flex-col items-center space-y-4">
                    <div id="node-blazor" class="diagram-node w-full p-6 bg-white rounded-xl shadow-md border text-center">
                        <div class="text-4xl">üñ•Ô∏è</div>
                        <h4 class="mt-2 text-xl font-bold text-slate-800">Blazor UI</h4>
                        <p class="text-slate-500 text-sm">User Interface</p>
                    </div>
                     <div class="text-2xl text-slate-400">‚Üì‚Üë</div>
                    <div id="node-api" class="diagram-node w-full p-6 bg-white rounded-xl shadow-md border text-center">
                        <div class="text-4xl">üß†</div>
                        <h4 class="mt-2 text-xl font-bold text-slate-800">Backend API</h4>
                        <p class="text-slate-500 text-sm">Business Logic</p>
                    </div>
                </div>
                <div id="architecture-info" class="md:col-span-2 bg-white p-8 rounded-xl shadow-lg border min-h-[300px]">
                    <h4 class="text-2xl font-bold text-slate-900 mb-4">Component Details</h4>
                    <p class="text-slate-600">Select a component on the left to see its description and responsibilities.</p>
                </div>
                 <div class="flex flex-col items-center space-y-4 md:mt-[-10.5rem]">
                    <div class="text-2xl text-slate-400">‚Üì‚Üë</div>
                    <div id="node-playwright" class="diagram-node w-full p-6 bg-white rounded-xl shadow-md border text-center">
                         <div class="text-4xl">ü§ñ</div>
                        <h4 class="mt-2 text-xl font-bold text-slate-800">Playwright Service</h4>
                        <p class="text-slate-500 text-sm">Automation Engine</p>
                    </div>
                     <div class="text-2xl text-slate-400">‚Üì‚Üë</div>
                     <div id="node-db" class="diagram-node w-full p-6 bg-white rounded-xl shadow-md border text-center">
                        <div class="text-4xl">üóÑÔ∏è</div>
                        <h4 class="mt-2 text-xl font-bold text-slate-800">PostgreSQL DB</h4>
                        <p class="text-slate-500 text-sm">Data Storage</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="workflow" class="py-16 bg-slate-100 -mx-6 px-6 rounded-xl">
             <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">The "Scout Agent" Workflow</h3>
                <p class="mt-2 text-slate-500 max-w-2xl mx-auto">This two-phase process separates messy reconnaissance from clean, fast application submission.</p>
            </div>
            <div class="flex flex-col md:flex-row justify-center items-center gap-4 md:gap-0">
                <!-- Step 1 -->
                <div class="text-center p-6 max-w-xs">
                    <div class="mx-auto w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-2xl font-bold text-blue-600 border-4 border-white shadow">1</div>
                    <h4 class="font-bold mt-4">Scout Run</h4>
                    <p class="text-sm text-slate-600 mt-1">A disposable "Scout" account navigates the entire survey, clicking "next" and providing placeholder answers to map all questions.</p>
                </div>
                <div class="text-4xl text-blue-300 hidden md:block mx-4">‚Üí</div>
                 <!-- Step 2 -->
                <div class="text-center p-6 max-w-xs">
                    <div class="mx-auto w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-2xl font-bold text-blue-600 border-4 border-white shadow">2</div>
                    <h4 class="font-bold mt-4">Review & Learn</h4>
                    <p class="text-sm text-slate-600 mt-1">The system compares the scouted questions to the user's profile and presents only the new, unknown questions for the user to answer.</p>
                </div>
                 <div class="text-4xl text-blue-300 hidden md:block mx-4">‚Üí</div>
                 <!-- Step 3 -->
                <div class="text-center p-6 max-w-xs">
                    <div class="mx-auto w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center text-2xl font-bold text-blue-600 border-4 border-white shadow">3</div>
                    <h4 class="font-bold mt-4">Primary Run</h4>
                    <p class="text-sm text-slate-600 mt-1">With a complete set of answers, the system logs in with the user's primary account and fills the entire survey in one clean, quick pass.</p>
                </div>
            </div>
        </section>

        <section id="tech-stack" class="py-16">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">Core Technology Stack</h3>
                <p class="mt-2 text-slate-500 max-w-2xl mx-auto">Built on the modern, unified .NET ecosystem.</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8 text-center">
                <div class="space-y-2">
                    <img src="https://placehold.co/100x100/EBF4FF/1E40AF?text=.NET+Aspire" alt=".NET Aspire" class="mx-auto rounded-full">
                    <h4 class="font-bold">.NET Aspire</h4>
                    <p class="text-sm text-slate-500">Orchestration</p>
                </div>
                <div class="space-y-2">
                     <img src="https://placehold.co/100x100/EBF4FF/1E40AF?text=ASP.NET" alt="ASP.NET Core" class="mx-auto rounded-full">
                    <h4 class="font-bold">ASP.NET Core</h4>
                    <p class="text-sm text-slate-500">Backend API</p>
                </div>
                <div class="space-y-2">
                     <img src="https://placehold.co/100x100/EBF4FF/1E40AF?text=Blazor" alt="Blazor" class="mx-auto rounded-full">
                    <h4 class="font-bold">Blazor Server</h4>
                    <p class="text-sm text-slate-500">Frontend</p>
                </div>
                <div class="space-y-2">
                     <img src="https://placehold.co/100x100/EBF4FF/1E40AF?text=Playwright" alt="Playwright" class="mx-auto rounded-full">
                    <h4 class="font-bold">Playwright</h4>
                    <p class="text-sm text-slate-500">Automation</p>
                </div>
                <div class="space-y-2">
                     <img src="https://placehold.co/100x100/EBF4FF/1E40AF?text=PostgreSQL" alt="PostgreSQL" class="mx-auto rounded-full">
                    <h4 class="font-bold">PostgreSQL</h4>
                    <p class="text-sm text-slate-500">Database</p>
                </div>
            </div>
        </section>

        <section id="risks" class="py-16">
             <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-900">Risks & Mitigations</h3>
                <p class="mt-2 text-slate-500 max-w-2xl mx-auto">Proactively addressing the challenges of web automation.</p>
            </div>
            <div id="accordion" class="max-w-3xl mx-auto space-y-4">
                <!-- Accordion Item 1 -->
                <div class="bg-white rounded-lg shadow-sm border border-slate-200">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-5 font-semibold text-slate-800">
                        <span>Risk: Bot Detection</span>
                        <span class="accordion-icon text-blue-500 text-2xl font-thin transition-transform transform">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="p-5 border-t border-slate-200 text-slate-600">
                            <p><strong>Mitigation:</strong> A multi-layered strategy is used to mimic human behavior. This includes adding randomized delays between actions, simulating keystrokes sequentially, using a common browser fingerprint (user-agent, viewport), and maintaining stateful sessions with cookies to appear as a returning user.</p>
                        </div>
                    </div>
                </div>
                 <!-- Accordion Item 2 -->
                <div class="bg-white rounded-lg shadow-sm border border-slate-200">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-5 font-semibold text-slate-800">
                        <span>Risk: CAPTCHAs</span>
                         <span class="accordion-icon text-blue-500 text-2xl font-thin transition-transform transform">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="p-5 border-t border-slate-200 text-slate-600">
                            <p><strong>Mitigation:</strong> The automation service is programmed to detect common CAPTCHA elements. If a CAPTCHA is found, the process halts immediately. It takes a screenshot and alerts the user, allowing them to solve it manually in a separate browser before the application proceeds.</p>
                        </div>
                    </div>
                </div>
                 <!-- Accordion Item 3 -->
                <div class="bg-white rounded-lg shadow-sm border border-slate-200">
                    <button class="accordion-header w-full flex justify-between items-center text-left p-5 font-semibold text-slate-800">
                        <span>Risk: Website UI Changes</span>
                        <span class="accordion-icon text-blue-500 text-2xl font-thin transition-transform transform">+</span>
                    </button>
                    <div class="accordion-content">
                        <div class="p-5 border-t border-slate-200 text-slate-600">
                           <p><strong>Mitigation:</strong> The system avoids relying on fragile CSS selectors. Instead, it uses Playwright's robust locators that target elements based on user-visible text (e.g., `getByLabel('First Name')`). This makes the automation far more resilient to minor changes in website layout and styling.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Nav link highlighting on scroll
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-50% 0px -50% 0px' });
            sections.forEach(section => observer.observe(section));

            // Architecture diagram logic
            const nodes = document.querySelectorAll('.diagram-node');
            const infoBox = document.getElementById('architecture-info');
            const descriptions = {
                'node-blazor': {
                    title: 'Blazor Server UI',
                    text: 'The frontend is a Blazor Server application. This allows for a highly interactive, stateful user experience written entirely in C#. It communicates with the Backend API to fetch data and initiate actions. It is responsible for all rendering and user interaction.'
                },
                'node-api': {
                    title: 'ASP.NET Core Backend API',
                    text: 'The central nervous system of the application. This stateless service holds all business logic, manages user identity, handles secure credential encryption, and orchestrates the automation workflows by calling the Playwright Service. It is the single source of truth.'
                },
                'node-playwright': {
                    title: 'Playwright Service',
                    text: 'A minimal, dedicated ASP.NET Core API whose sole responsibility is executing browser automation tasks using Playwright. It is completely decoupled from the main application logic and database, receiving simple commands like "scrape this URL" or "fill this form".'
                },
                'node-db': {
                    title: 'PostgreSQL Database',
                    text: 'The primary data store for the application. It holds user account information (via ASP.NET Identity), encrypted external credentials, and the user\'s learned profile data. PostgreSQL was chosen for its robustness and powerful JSONB support.'
                }
            };
            nodes.forEach(node => {
                node.addEventListener('click', () => {
                    nodes.forEach(n => n.classList.remove('active'));
                    node.classList.add('active');
                    const content = descriptions[node.id];
                    infoBox.innerHTML = `<h4 class="text-2xl font-bold text-slate-900 mb-4">${content.title}</h4><p class="text-slate-600">${content.text}</p>`;
                });
            });

            // Accordion logic
            const accordionHeaders = document.querySelectorAll('.accordion-header');
            accordionHeaders.forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('.accordion-icon');
                    const isOpen = content.style.maxHeight && content.style.maxHeight !== '0px';

                    // Close all other accordions
                    document.querySelectorAll('.accordion-content').forEach(c => c.style.maxHeight = '0px');
                     document.querySelectorAll('.accordion-icon').forEach(i => {
                        i.classList.remove('rotate-45');
                        i.textContent = '+';
                    });

                    if (!isOpen) {
                        content.style.maxHeight = content.scrollHeight + 'px';
                        icon.classList.add('rotate-45');
                        icon.textContent = '+'; // Keep plus, rotate it
                    }
                });
            });
        });
    </script>
</body>
</html>

